{"remainingRequest":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/packages/coupon/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/packages/coupon/index.vue","mtime":1631158204462},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJ0AvdXRpbHMvY3JlYXRlJzsKaW1wb3J0IHsgQmFzZUFwaVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2UvQmFzZUFwaVNlcnZpY2UnOwppbXBvcnQgY29ubmVjdERhdGEgIGZyb20gJ0AvdXRpbHMvY29ubmVjdCc7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnQG51dHVpL251dHVpJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCmNvbnN0IHsgY29tcG9uZW50TmFtZSwgY3JlYXRlIH0gPSBjcmVhdGVDb21wb25lbnQoJ2NvdXBvbicpOwpjb25zdCBfdG9hc3Q6IGFueSA9IFRvYXN0OwpsZXQgYmFzZVNlcnZpY2U6IEJhc2VBcGlTZXJ2aWNlID0gbmV3IEJhc2VBcGlTZXJ2aWNlKCk7CgpleHBvcnQgZGVmYXVsdCBjcmVhdGUoewogIHByb3BzOiB7CiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgT2JqZWN0XSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgY29sOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgZW5kVGltZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBkYXRhKG5ld1ZhbHVlKSB7CiAgICAgIGlmKG5ld1ZhbHVlKSB7CiAgICAgICAgKHRoaXMgYXMgYW55KS5kZWFsRGF0YSgodGhpcyBhcyBhbnkpLmRhdGFbMF0sICh0aGlzIGFzIGFueSkuZGF0YVsxXSkKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKCQlyZXR1cm4gewogICAgICBkYXRhOiB7fSwKICAgICAgc3RhdGU6ICcnLAogICAgICB0aW1lcjogbnVsbCwKICAgIH07Cgl9LAogIGNvbXBvbmVudHM6IHt9LAogIG1vdW50ZWQoKSB7CiAgfSwKICBjb21wdXRlZDogewogICAgY2xhc3NlcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBbY29tcG9uZW50TmFtZV06IHRydWUsCiAgICAgICAgW2Ake2NvbXBvbmVudE5hbWV9LSR7KHRoaXMgYXMgYW55KS50eXBlfWBdOiAodGhpcyBhcyBhbnkpLnR5cGUsCiAgICAgICAgW2Ake2NvbXBvbmVudE5hbWV9LSR7KHRoaXMgYXMgYW55KS5jb2x9YF06ICh0aGlzIGFzIGFueSkuY29sLAogICAgICAgIFsodGhpcyBhcyBhbnkpLmRhdGEuY0ltYWdlID8gYCR7Y29tcG9uZW50TmFtZX0taW1hZ2VgIDogJyddOiB0cnVlLAogICAgICAgIFtgJHtjb21wb25lbnROYW1lfS0keyhbJ2dldCcsJ3VzZScsJ2JhbiddIGFzIGFueSlbKHRoaXMgYXMgYW55KS5zdGF0ZV19YF06ICh0aGlzIGFzIGFueSkuc3RhdGUKICAgICAgfTsKICAgIH0sCiAgICBjbGFzc2VzQ29udCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBbYCR7Y29tcG9uZW50TmFtZX0tY29udGBdOiB0cnVlCiAgICAgIH07CiAgICB9LAogICAgY2xhc3Nlc0luZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgW2Ake2NvbXBvbmVudE5hbWV9LWluZm9gXTogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIHN0eWxlcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAvLyAnYm9yZGVyLXJhZGl1cyc6ICgodGhpcyBhcyBhbnkpIGFzIGFueSkucmFkaXVzICsgJ3B4JwogICAgICB9OwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgICh0aGlzIGFzIGFueSkuZGVhbERhdGEoKHRoaXMgYXMgYW55KS5kYXRhWzBdLCAodGhpcyBhcyBhbnkpLmRhdGFbMV0pCiAgICAvLyDlpITnkIbliLjnmoTlrZfmrrXmlbDmja4KICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgIGNhc2UgJ25vcm1hbCc6IHRoaXMuc2V0Tm9ybWFsQ291cG9uKCk7IGJyZWFrOwogICAgICAvLyBjYXNlICdmaW5hbmNlJzogdGhpcy5nZXRGaW5hbmNlQ291cG9uKCk7IGJyZWFrOwogICAgICAvLyBjYXNlICdzaGFyZSc6IHRoaXMuc2V0U2hhcmVDb3Vwb24oKTsgYnJlYWs7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWFsRGF0YShkYXRhLCBwYXJhbXMpIHsKICAgICAgKHRoaXMgYXMgYW55KS5kYXRhID0gY29ubmVjdERhdGEoZGF0YSwgcGFyYW1zKTsKICAgIH0sCiAgICAvLyDmma7pgJrllYbln47liLgKICAgIHNldE5vcm1hbENvdXBvbigpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGEnLCAodGhpcyBhcyBhbnkpLmRhdGEpCiAgICAgIGxldCBjcG5SZXN1bHRDb2RlLHNvbGRPdXQ7CiAgICAgIC8vIOWkhOeQhui3qOWTgeexu+aLieaWsOWIuOeahOWtl+autei/h+a7pAogICAgICBsZXQgZXh0ID0gKHRoaXMgYXMgYW55KS5kYXRhLmV4dGVuc2lvbgogICAgICBsZXQgeyBjb3Vwb25TdHlsZSwgY291cG9uVHlwZSwgc3ViU2t1IH0gPSBleHQKICAgICAgZXh0LmNfaW1nID0gKHN1YlNrdSAmJiBzdWJTa3VbMF0pIAogICAgICAgID8gc3ViU2t1WzBdLmltZyAKICAgICAgICA6ICh0aGlzIGFzIGFueSkuZGF0YS5waWN0dXJlVXJsCiAgICAgICAgICA/ICh0aGlzIGFzIGFueSkuZGF0YS5waWN0dXJlVXJsCiAgICAgICAgICA6ICcnCiAgICAgIGV4dC5jX3RpdCA9ICh0aGlzIGFzIGFueSkuY2xlYW5aZXJvKGV4dC5kaXNDb3VudCkKICAgICAgZXh0LmNfbGluZTEgPSAodGhpcyBhcyBhbnkpLmNsZWFuWmVybyhleHQucXVvdGEpCiAgICAgIC8vIGV4dC5jX2xpbmUyID0gKHRoaXMgYXMgYW55KS5kYXRhLmRlc2MgPyAodGhpcyBhcyBhbnkpLmRhdGEuZGVzYyA6IGV4dC5saW1pdFN0cgogICAgICBleHQuY19saW5lMiA9IGV4dC5saW1pdFN0cgogICAgICAvLyDmiZPmoIcKICAgICAgaWYoKHRoaXMgYXMgYW55KS5kYXRhLmNvbW1lbnRzWzBdID09ICck5o+Q5oql5aSH5rOoJykgewogICAgICAgIGV4dC5jX2xhYmVsID0gJycKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihleHQuY291cG9uS2luZCA9PSAnMCcpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflhajlk4HnsbsnLCAodGhpcyBhcyBhbnkpLmRhdGEpCiAgICAgICAgICBleHQuY19sYWJlbCA9ICcvL2ltZzE0LjM2MGJ1eWltZy5jb20vaW1hZ2V0b29scy9qZnMvdDEvMTk1MzE4LzI4LzI2MjMvMzQ0OC82MDliNDVhZkU2NDE3MzNhNi8xZTdmMzQzYzVlZjA2YWM3LnBuZycKICAgICAgICB9IGVsc2UgaWYoZXh0LnVzZXJMYWJlbCA9PSAnMTAwLTEnIHx8IGV4dC51c2VyTGFiZWwgPT0gJzEwMC0yJykgewogICAgICAgICAgY29uc29sZS5sb2coJ3BsdXMnLCAodGhpcyBhcyBhbnkpLmRhdGEpCiAgICAgICAgICBleHQuY19sYWJlbCA9ICcvL2ltZzEyLjM2MGJ1eWltZy5jb20vaW1hZ2V0b29scy9qZnMvdDEvMTg4OTU2LzMxLzI3NTAvMjU4Ny82MDliNDY4YkUyM2ViZjRjNy9iOGNkNTA0NTIyMWI2YTliLnBuZycKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ2V4dC5lbmRUaW1lJywgZXh0LmVuZFRpbWUpCiAgICAgIC8vIOi/h+acn+aXtumXtAogICAgICBpZihleHQuZW5kVGltZSkgewogICAgICAgIGxldCByZXNUaW1lID0gbW9tZW50KGV4dC5lbmRUaW1lKS5mcm9tTm93KCkKICAgICAgICBpZihyZXNUaW1lLmluZGV4T2YoJ2luJykgIT0gLTEpIHsKICAgICAgICAgIGlmKHJlc1RpbWUuaW5kZXhPZignZGF5cycpICE9IC0xKXsKICAgICAgICAgICAgZXh0LmNfZW5kVGltZSA9IHJlc1RpbWUubWF0Y2goL1xkKy9nKSArICflpKnlkI7ov4fmnJ8nCiAgICAgICAgICAgIGV4dC5jX2VuZFRpbWUxMTEgPSAn5aSp5ZCO6L+H5pyfJwogICAgICAgICAgICBjb25zb2xlLmxvZygnZXh0LmNfZW5kVGltZSAxJywgZXh0KQogICAgICAgICAgfSBlbHNlIGlmKHJlc1RpbWUuaW5kZXhPZignaG91cnMnKSAhPSAtMSl7CiAgICAgICAgICAgIGV4dC5jX2VuZFRpbWUgPSByZXNUaW1lLm1hdGNoKC9cZCsvZykgKyAn5bCP5pe25ZCO6L+H5pyfJwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2coJ2V4dC5jX2VuZFRpbWUnLCBleHQpCiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCdleHQuZW5kVGltZSAxJywgZXh0KQogICAgICAKICAgICAgLy8g6YeR6aKd44CB6Zeo5qeb6K6+572uCiAgICAgIC8vIOS6rOi0tAogICAgICBpZiAoY291cG9uU3R5bGUgPT0gMjgpIHsKICAgICAgICBleHQuY19saW5lMSA9IGDmr4/mu6Ekeyh0aGlzIGFzIGFueSkuY2xlYW5aZXJvKGV4dC5xdW90YSl95YePJHsodGhpcyBhcyBhbnkpLmNsZWFuWmVybyhleHQuZGlzQ291bnQpfWAKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmipjmiaPliLgKICAgICAgICBpZiAoY291cG9uU3R5bGUgPT0gMykgewogICAgICAgICAgaWYgKCtleHQucXVvdGEpIHsKICAgICAgICAgICAgZXh0LmNfdGl0ID0gYCR7TWF0aC5yb3VuZCgoMSAtIGV4dC5kaXNDb3VudC9leHQucXVvdGEpICogMTAwKSAvIDEwfeaKmGAKICAgICAgICAgIH0KICAgICAgICAgIGV4dC5jX2xpbmUxID0gK2V4dC5xdW90YSAmJiArY291cG9uVHlwZSAhPT0gMCA/IGDmu6Ekeyh0aGlzIGFzIGFueSkuY2xlYW5aZXJvKGV4dC5xdW90YSl95YWD5Y+v55SoYCA6ICfml6Dpl6jmp5snCiAgICAgICAgfQogICAgICAgIC8vIOa7oeWHj+OAgeeri+WHj+WIuAogICAgICAgIGVsc2UgaWYgKGNvdXBvblR5cGUgPT0gMCB8fCBjb3Vwb25UeXBlID09IDEpIHsKICAgICAgICAgIGV4dC5jX2xpbmUxID0gK2V4dC5xdW90YSA/IGDmu6Ekeyh0aGlzIGFzIGFueSkuY2xlYW5aZXJvKGV4dC5xdW90YSl95YWD5Y+v55SoYCA6ICfml6Dpl6jmp5snCiAgICAgICAgfQogICAgICAgIC8vIOeJqea1geWIuAogICAgICAgIGlmIChjb3Vwb25UeXBlID09IDEwICYmIGNvdXBvblN0eWxlID09IDEwKSB7CiAgICAgICAgICBleHQuY19saW5lMSA9ICtleHQucXVvdGEgPyBg5ruhJHsodGhpcyBhcyBhbnkpLmNsZWFuWmVybyhleHQucXVvdGEpfeWFg+WPr+eUqGAgOiAn5peg6Zeo5qebJwogICAgICAgIH0KICAgICAgICAodGhpcyBhcyBhbnkpLiRzZXQoKHRoaXMgYXMgYW55KS5kYXRhLCAnZXh0ZW5zaW9uJywgZXh0KTsKICAgICAgfQogICAgICBjcG5SZXN1bHRDb2RlPSAodGhpcyBhcyBhbnkpLmRhdGEuZXh0ZW5zaW9uLmNwblJlc3VsdENvZGU7CiAgICAgIHNvbGRPdXQ9ICh0aGlzIGFzIGFueSkuZGF0YS5leHRlbnNpb24uc29sZE91dDsKICAgICAgLy8g6K6+572u5Yi454q25oCBCiAgICAgIGlmIChjcG5SZXN1bHRDb2RlID09IDE0IHx8IGNwblJlc3VsdENvZGUgPT0gMTUpIHsKICAgICAgICAodGhpcyBhcyBhbnkpLnN0YXRlID0gMTsgLy8g6aKG6L+HCiAgICAgIH0gZWxzZSBpZiAoY3BuUmVzdWx0Q29kZSA9PSAxNiB8fCBjcG5SZXN1bHRDb2RlID09IDE3IHx8IHNvbGRPdXQgPT0gMSkgewogICAgICAgICh0aGlzIGFzIGFueSkuc3RhdGUgPSAyOyAvLyDlt7LmiqLlhYkKICAgICAgfSBlbHNlIHsKICAgICAgICAodGhpcyBhcyBhbnkpLnN0YXRlID0gMDsgLy8g5pyq6aKG5Y+WCiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDbGljaygpIHsKICAgICAgc3dpdGNoICgodGhpcyBhcyBhbnkpLnR5cGUpIHsKICAgICAgICBjYXNlICdub3JtYWwnOiAodGhpcyBhcyBhbnkpLmdldENvbW1vbkNvdW5wb24oKTsgYnJlYWs7CiAgICAgICAgY2FzZSAnZmluYW5jZSc6ICh0aGlzIGFzIGFueSkuZ2V0RmluYW5jZUNvdXBvbigpOyBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPluaZrumAmuWVhuWfjuWIuAogICAgZ2V0Q29tbW9uQ291bnBvbigpIHsKICAgICAgaWYgKCh0aGlzIGFzIGFueSkuc3RhdGUgPT0gMCkgewogICAgICAgIC8vIOWOu+mihuWPlgogICAgICAgIGxldCBrZXkscm9sZUlkOwogICAgICAgIGtleSA9ICh0aGlzIGFzIGFueSkuZGF0YS5leHRlbnNpb24ua2V5OwogICAgICAgIHJvbGVJZCA9ICh0aGlzIGFzIGFueSkuZGF0YS5leHRlbnNpb24ucm9sZUlkOwogICAgICAgIGNvbnNvbGUubG9nKCcxMScpOwogICAgICAgICh0aGlzIGFzIGFueSkuJGVtaXQoJ2NsaWNrLXJlcG9ydCcsICh0aGlzIGFzIGFueSkuZGF0YSwgKHRoaXMgYXMgYW55KS5zdGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAoKHRoaXMgYXMgYW55KS5zdGF0ZSA9PSAxKSB7CiAgICAgICAgLy8g5Y675L2/55SoCiAgICAgICAgaWYoKHRoaXMgYXMgYW55KS50aW1lb3V0KXsKICAgICAgICAgIGNsZWFyVGltZW91dCgodGhpcyBhcyBhbnkpLnRpbWVvdXQpOwogICAgICAgICAgKHRoaXMgYXMgYW55KS50aW1lb3V0PW51bGw7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHsgY291cG9uS2luZCwgYmF0Y2hJZCwgc2hvcElkLCB2ZW5kZXJJZCB9ID0gKHRoaXMgYXMgYW55KS5kYXRhLmV4dGVuc2lvbgogICAgICAgIGlmIChjb3Vwb25LaW5kID09IDEgfHwgY291cG9uS2luZCA9PSAzKSB7CiAgICAgICAgICAvLyDot7PkvJjmg6DliLjpobXpnaIKICAgICAgICAgICh0aGlzIGFzIGFueSkuJGp1bXAudG9Vc2VDb3Vwb24oYmF0Y2hJZCkKICAgICAgICB9IGVsc2UgaWYgKGNvdXBvbktpbmQgPT0gMikgewogICAgICAgICAgLy8g6Lez5bqX6ZO6CiAgICAgICAgICAodGhpcyBhcyBhbnkpLiRqdW1wLnRvU2hvcCh2ZW5kZXJJZCsnJykKICAgICAgICB9IGVsc2UgaWYgKGNvdXBvbktpbmQgPT0gMCkgewogICAgICAgICAgLy8g5Y6756eS5p2ACiAgICAgICAgICAodGhpcyBhcyBhbnkpLiRqdW1wLnRvU2Vja2lsbCgpCiAgICAgICAgfQogICAgICAgIHJldHVybgogICAgICB9CiAgICB9LAogICAgY2xlYW5aZXJvICh2YWx1ZTogc3RyaW5nKSB7CiAgICAgIHZhbHVlID0gdmFsdWUKICAgICAgbGV0IHJlcyA9IC9cLjArJC8uZXhlYyh2YWx1ZSkKICAgICAgaWYgKHJlcykgewogICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCByZXMuaW5kZXgpCiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlCiAgICB9CiAgfQp9KTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/packages/coupon","sourcesContent":["<template>\n  <div :class=\"classes\" :style=\"styles\" @click=\"handleClick()\">\n    <template v-if=\"col && col == '1'\">\n      <div :class=\"classesCont\">\n        <div :class=\"classesInfo\">\n          <template v-if=\"data.cImage\">\n            <nutcat-image class=\"sub-img\" :src=\"data.extension.c_img\"></nutcat-image>\n          </template>\n          <!-- 价格 -->\n          <template v-if=\"typeof + data.extension.c_tit == 'number' && !isNaN(+data.extension.c_tit)\">\n            <p class=\"sub-price\">\n              <span class=\"rmb\">&yen;</span>\n              {{data.extension.c_tit}}\n            </p>\n          </template>\n          <!-- 文字 -->\n          <template v-else>\n            <nutcat-text class=\"sub-price\" row=\"1\">{{data.extension.c_tit}}</nutcat-text>\n          </template>\n          <nutcat-text class=\"sub-quota\" row=\"1\">{{data.extension.c_line1}}</nutcat-text>\n          <nutcat-text class=\"sub-limitStr\" row=\"1\">{{data.extension.c_line2}}</nutcat-text>\n        </div>\n        <div class=\"sub-btn\">\n          <div v-if=\"state == 0\">立即领取</div>\n          <div v-else-if=\"state == 1\">去使用<i class=\"icon-arrow\"></i></div>\n          <div v-else-if=\"state == 2\">已抢光</div>\n        </div>\n      </div>\n      <!-- </template> -->\n      <template v-if=\"data.cLabel\">\n        <nutcat-tag class=\"sub-tag\" :type=\"data.cLabel == 'plus' ? data.cLabel : 'red'\"\n        >\n          {{data.cLabel == 'plus' ? '' : data.cLabel}}\n        </nutcat-tag>\n      </template>\n      <template v-if=\"endTime\">\n        <div class=\"sub-endTime\">\n          {{data.extension.c_endTime}}\n        </div>\n      </template>\n    </template>\n    <template v-else>\n      <div :class=\"classesCont\">\n        <div :class=\"classesInfo\">\n          <template v-if=\"data.cImage\">\n            <nutcat-image class=\"sub-img\" :src=\"data.extension.c_img\"></nutcat-image>\n          </template>\n          <!-- 价格 -->\n          <template v-if=\"typeof + data.extension.c_tit == 'number' && !isNaN(+data.extension.c_tit)\">\n            <p class=\"sub-price\">\n              <span class=\"rmb\">&yen;</span>\n              {{data.extension.c_tit}}\n            </p>\n          </template>\n          <!-- 文字 -->\n          <template v-else>\n            <nutcat-text class=\"sub-price\" row=\"1\">{{data.extension.c_tit}}</nutcat-text>\n          </template>\n          <nutcat-text class=\"sub-quota\" row=\"1\">{{data.extension.c_line1}}</nutcat-text>\n          <nutcat-text class=\"sub-limitStr\" row=\"1\">{{data.extension.c_line2}}</nutcat-text>\n        </div>\n        <div class=\"sub-btn\">\n          <div v-if=\"state == 0\">立即领取</div>\n          <div v-else-if=\"state == 1\">去使用<i class=\"icon-arrow\"></i></div>\n          <div v-else-if=\"state == 2\">已抢光</div>\n        </div>\n      </div>\n      <!-- </template> -->\n      <template v-if=\"data.cLabel\">\n        <nutcat-tag class=\"sub-tag\" :type=\"data.cLabel == 'plus' ? data.cLabel : 'red'\"\n        >\n          {{data.cLabel == 'plus' ? '' : data.cLabel}}\n        </nutcat-tag>\n      </template>\n      <template v-if=\"endTime\">\n        <div class=\"sub-endTime\">\n          {{data.extension.c_endTime}}\n        </div>\n      </template>\n    </template>\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { createComponent } from '@/utils/create';\nimport { BaseApiService } from '@/service/BaseApiService';\nimport connectData  from '@/utils/connect';\nimport { Toast } from '@nutui/nutui';\nimport moment from 'moment'\nconst { componentName, create } = createComponent('coupon');\nconst _toast: any = Toast;\nlet baseService: BaseApiService = new BaseApiService();\n\nexport default create({\n  props: {\n    data: {\n      type: [Array, Object],\n      default: () => []\n    },\n    type: {\n      type: [String, Number],\n      default: ''\n    },\n    col: {\n      type: [String, Number],\n      default: ''\n    },\n    endTime: {\n      type: Boolean,\n      default: false\n    },\n  },\n  watch: {\n    data(newValue) {\n      if(newValue) {\n        (this as any).dealData((this as any).data[0], (this as any).data[1])\n      }\n    }\n  },\n  data() {\n\t\treturn {\n      data: {},\n      state: '',\n      timer: null,\n    };\n\t},\n  components: {},\n  mounted() {\n  },\n  computed: {\n    classes() {\n      return {\n        [componentName]: true,\n        [`${componentName}-${(this as any).type}`]: (this as any).type,\n        [`${componentName}-${(this as any).col}`]: (this as any).col,\n        [(this as any).data.cImage ? `${componentName}-image` : '']: true,\n        [`${componentName}-${(['get','use','ban'] as any)[(this as any).state]}`]: (this as any).state\n      };\n    },\n    classesCont() {\n      return {\n        [`${componentName}-cont`]: true\n      };\n    },\n    classesInfo() {\n      return {\n        [`${componentName}-info`]: true\n      };\n    },\n    styles() {\n      return {\n        // 'border-radius': ((this as any) as any).radius + 'px'\n      };\n    }\n  },\n  created() {\n    (this as any).dealData((this as any).data[0], (this as any).data[1])\n    // 处理券的字段数据\n    switch (this.type) {\n      case 'normal': this.setNormalCoupon(); break;\n      // case 'finance': this.getFinanceCoupon(); break;\n      // case 'share': this.setShareCoupon(); break;\n    }\n  },\n  methods: {\n    dealData(data, params) {\n      (this as any).data = connectData(data, params);\n    },\n    // 普通商城券\n    setNormalCoupon() {\n      // console.log('data', (this as any).data)\n      let cpnResultCode,soldOut;\n      // 处理跨品类拉新券的字段过滤\n      let ext = (this as any).data.extension\n      let { couponStyle, couponType, subSku } = ext\n      ext.c_img = (subSku && subSku[0]) \n        ? subSku[0].img \n        : (this as any).data.pictureUrl\n          ? (this as any).data.pictureUrl\n          : ''\n      ext.c_tit = (this as any).cleanZero(ext.disCount)\n      ext.c_line1 = (this as any).cleanZero(ext.quota)\n      // ext.c_line2 = (this as any).data.desc ? (this as any).data.desc : ext.limitStr\n      ext.c_line2 = ext.limitStr\n      // 打标\n      if((this as any).data.comments[0] == '$提报备注') {\n        ext.c_label = ''\n      } else {\n        if(ext.couponKind == '0') {\n          console.log('全品类', (this as any).data)\n          ext.c_label = '//img14.360buyimg.com/imagetools/jfs/t1/195318/28/2623/3448/609b45afE641733a6/1e7f343c5ef06ac7.png'\n        } else if(ext.userLabel == '100-1' || ext.userLabel == '100-2') {\n          console.log('plus', (this as any).data)\n          ext.c_label = '//img12.360buyimg.com/imagetools/jfs/t1/188956/31/2750/2587/609b468bE23ebf4c7/b8cd5045221b6a9b.png'\n        }\n      }\n      console.log('ext.endTime', ext.endTime)\n      // 过期时间\n      if(ext.endTime) {\n        let resTime = moment(ext.endTime).fromNow()\n        if(resTime.indexOf('in') != -1) {\n          if(resTime.indexOf('days') != -1){\n            ext.c_endTime = resTime.match(/\\d+/g) + '天后过期'\n            ext.c_endTime111 = '天后过期'\n            console.log('ext.c_endTime 1', ext)\n          } else if(resTime.indexOf('hours') != -1){\n            ext.c_endTime = resTime.match(/\\d+/g) + '小时后过期'\n          }\n          console.log('ext.c_endTime', ext)\n        }\n      }\n      console.log('ext.endTime 1', ext)\n      \n      // 金额、门槛设置\n      // 京贴\n      if (couponStyle == 28) {\n        ext.c_line1 = `每满${(this as any).cleanZero(ext.quota)}减${(this as any).cleanZero(ext.disCount)}`\n      } else {\n        // 折扣券\n        if (couponStyle == 3) {\n          if (+ext.quota) {\n            ext.c_tit = `${Math.round((1 - ext.disCount/ext.quota) * 100) / 10}折`\n          }\n          ext.c_line1 = +ext.quota && +couponType !== 0 ? `满${(this as any).cleanZero(ext.quota)}元可用` : '无门槛'\n        }\n        // 满减、立减券\n        else if (couponType == 0 || couponType == 1) {\n          ext.c_line1 = +ext.quota ? `满${(this as any).cleanZero(ext.quota)}元可用` : '无门槛'\n        }\n        // 物流券\n        if (couponType == 10 && couponStyle == 10) {\n          ext.c_line1 = +ext.quota ? `满${(this as any).cleanZero(ext.quota)}元可用` : '无门槛'\n        }\n        (this as any).$set((this as any).data, 'extension', ext);\n      }\n      cpnResultCode= (this as any).data.extension.cpnResultCode;\n      soldOut= (this as any).data.extension.soldOut;\n      // 设置券状态\n      if (cpnResultCode == 14 || cpnResultCode == 15) {\n        (this as any).state = 1; // 领过\n      } else if (cpnResultCode == 16 || cpnResultCode == 17 || soldOut == 1) {\n        (this as any).state = 2; // 已抢光\n      } else {\n        (this as any).state = 0; // 未领取\n      }\n    },\n    handleClick() {\n      switch ((this as any).type) {\n        case 'normal': (this as any).getCommonCounpon(); break;\n        case 'finance': (this as any).getFinanceCoupon(); break;\n      }\n    },\n    // 获取普通商城券\n    getCommonCounpon() {\n      if ((this as any).state == 0) {\n        // 去领取\n        let key,roleId;\n        key = (this as any).data.extension.key;\n        roleId = (this as any).data.extension.roleId;\n        console.log('11');\n        (this as any).$emit('click-report', (this as any).data, (this as any).state);\n      } else if ((this as any).state == 1) {\n        // 去使用\n        if((this as any).timeout){\n          clearTimeout((this as any).timeout);\n          (this as any).timeout=null;\n        }\n        const { couponKind, batchId, shopId, venderId } = (this as any).data.extension\n        if (couponKind == 1 || couponKind == 3) {\n          // 跳优惠券页面\n          (this as any).$jump.toUseCoupon(batchId)\n        } else if (couponKind == 2) {\n          // 跳店铺\n          (this as any).$jump.toShop(venderId+'')\n        } else if (couponKind == 0) {\n          // 去秒杀\n          (this as any).$jump.toSeckill()\n        }\n        return\n      }\n    },\n    cleanZero (value: string) {\n      value = value\n      let res = /\\.0+$/.exec(value)\n      if (res) {\n        return value.slice(0, res.index)\n      }\n      return value\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@import 'index.scss';\n</style>\n"]}]}