{"remainingRequest":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/sites/doc/components/Search.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/sites/doc/components/Search.vue","mtime":1630492889047},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSwgV2F0Y2ggfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IHsgbmF2IH0gZnJvbSAnQC9jb25maWcuanMnOwpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBTZWFyY2gKICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlYXJjaCBleHRlbmRzIFZ1ZSB7CiAgbmF2OiBhbnkgPSBuYXY7CiAgbmF2TGlzdDogYW55ID0gW107CiAgc2VhcmNoSW5kZXg6IG51bWJlciA9IDA7CiAgc2VhcmNoQ3VyTmFtZTogc3RyaW5nID0gJyc7CiAgc2VhcmNoTGlzdDogYW55ID0gW107CiAgc2VhcmNoVmFsOiBzdHJpbmcgPSAnJzsKICBzZWFyY2hDTmFtZTogc3RyaW5nID0gJyc7CiAgbW91bnRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCduYXYnLCBuYXYpOwogICAgdGhpcy5uYXYuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICBpdGVtLnBhY2thZ2VzLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgaWYoIXZhbHVlLmNoaWxkKQogICAgICAgIHRoaXMubmF2TGlzdC5wdXNoKHZhbHVlKTsKICAgICAgfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWFyY2gnLCB0aGlzLm5hdkxpc3QpOwogICAgfSk7CiAgfTsKICBAV2F0Y2goJ3NlYXJjaFZhbCcpCiAgb25TZWFyY2hWYWwodmFsOiBhbnksIG9sZFZhbDogYW55KXsKICAgIGlmKHZhbCkgewogICAgICB0aGlzLnNlYXJjaExpc3QgPSB0aGlzLm5hdkxpc3QuZmlsdGVyKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uc2hvdyA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTsKICAgICAgICAvLyBjb25zb2xlLmxvZygnaXRlbScsIGl0ZW0pOwogICAgICAgIGNvbnN0IHJ4ID0gbmV3IFJlZ0V4cCh2YWwsICdnaScpOwogICAgICAgIHJldHVybiByeC50ZXN0KGl0ZW0ubmFtZSArICcgJyArIGl0ZW0uY05hbWUgKyAnJyArIGl0ZW0uZGVzYyk7CiAgICAgIH0pOwogICAgICAvLyBjb25zb2xlLmxvZygncngyJywgdGhpcy5zZWFyY2hMaXN0Lmxlbmd0aCwgdGhpcy5zZWFyY2hMaXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuc2VhcmNoQ05hbWUgPSAnJzsKICAgICAgdGhpcy5zZWFyY2hJbmRleCA9IDA7CiAgICAgIHRoaXMuc2VhcmNoTGlzdCA9IFtdOwogICAgfQogIH0KICBvbmJsdXIoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5zZWFyY2hMaXN0ID0gW107CiAgICAgIHRoaXMuc2VhcmNoVmFsID0gJyc7CiAgICB9LCAyMDApOwogIH07CiAgY2hlY2tsaXN0KCkgewogICAgdGhpcy5zZWFyY2hWYWwgPSAnJzsKICAgIHRoaXMuc2VhcmNoQ3VyTmFtZSA9ICcnOwogICAgdGhpcy5zZWFyY2hJbmRleCA9IDA7CiAgfTsKICBjaG9zZUxpc3QgPSAoZSkgPT4gewogICAgbGV0IHNlYXJjaEluZGV4ID0gdGhpcy5zZWFyY2hJbmRleDsKICAgIGlmIChlLmtleUNvZGUgPT0gNDApIHsKICAgICAgc2VhcmNoSW5kZXgrKzsKICAgIH0KICAgIGlmIChlLmtleUNvZGUgPT0gMzgpIHsKICAgICAgc2VhcmNoSW5kZXgtLTsKICAgIH0KICAgIGlmIChzZWFyY2hJbmRleCA8IDApIHsKICAgICAgc2VhcmNoSW5kZXggPSAwOwogICAgfQogICAgY29uc3Qgc2VhcmNoTGlzdCA9IHRoaXMuc2VhcmNoTGlzdDsKICAgIGlmIChzZWFyY2hMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgY29uc3QgY05hbWUgPSBzZWFyY2hMaXN0W3NlYXJjaEluZGV4XSAmJiBzZWFyY2hMaXN0W3NlYXJjaEluZGV4XS5uYW1lOwogICAgICBpZiAoY05hbWUpIHsKICAgICAgICB0aGlzLnNlYXJjaEN1ck5hbWUgPSBjTmFtZTsKICAgICAgICB0aGlzLnNlYXJjaEluZGV4ID0gc2VhcmNoSW5kZXg7CiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnLycgKyBzZWFyY2hMaXN0W3NlYXJjaEluZGV4XS5uYW1lCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuc2VhcmNoQ3VyTmFtZSA9ICcnOwogICAgICAgICAgdGhpcy5zZWFyY2hJbmRleCA9IDA7CiAgICAgICAgICB0aGlzLnNlYXJjaFZhbCA9ICcnOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07Cn07Cg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/sites/doc/components","sourcesContent":["<template>\n  <div class=\"search-box\">\n    <input\n      type=\"text\"\n      class=\"search-input\"\n      placeholder=\"在 Cat 中搜索\"\n      v-model=\"searchVal\"\n      @blur=\"onblur\"\n      @keyup=\"choseList\"\n    />\n    <ul class=\"search-list\" v-show=\"searchList.length > 0\">\n      <li\n        :class=\"searchCurName == item.name ? 'cur' : ''\"\n        @click=\"checklist(item)\"\n        v-for=\"(item, index) in searchList\"\n        :key=\"index\"\n      >\n        <router-link :to=\"item.name.toLowerCase()\">\n          {{ item.name }}\n          <span>{{ item.cName }}</span>\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { nav } from '@/config.js';\n@Component({\n  components: {\n    Search\n  }\n})\nexport default class Search extends Vue {\n  nav: any = nav;\n  navList: any = [];\n  searchIndex: number = 0;\n  searchCurName: string = '';\n  searchList: any = [];\n  searchVal: string = '';\n  searchCName: string = '';\n  mounted() {\n    // console.log('nav', nav);\n    this.nav.forEach((item) => {\n      item.packages.forEach((value) => {\n        if(!value.child)\n        this.navList.push(value);\n      });\n      // console.log('search', this.navList);\n    });\n  };\n  @Watch('searchVal')\n  onSearchVal(val: any, oldVal: any){\n    if(val) {\n      this.searchList = this.navList.filter((item) => {\n        if (item.show === false) return false;\n        // console.log('item', item);\n        const rx = new RegExp(val, 'gi');\n        return rx.test(item.name + ' ' + item.cName + '' + item.desc);\n      });\n      // console.log('rx2', this.searchList.length, this.searchList);\n    } else {\n      this.searchCName = '';\n      this.searchIndex = 0;\n      this.searchList = [];\n    }\n  }\n  onblur() {\n    setTimeout(() => {\n      this.searchList = [];\n      this.searchVal = '';\n    }, 200);\n  };\n  checklist() {\n    this.searchVal = '';\n    this.searchCurName = '';\n    this.searchIndex = 0;\n  };\n  choseList = (e) => {\n    let searchIndex = this.searchIndex;\n    if (e.keyCode == 40) {\n      searchIndex++;\n    }\n    if (e.keyCode == 38) {\n      searchIndex--;\n    }\n    if (searchIndex < 0) {\n      searchIndex = 0;\n    }\n    const searchList = this.searchList;\n    if (searchList.length > 0) {\n      const cName = searchList[searchIndex] && searchList[searchIndex].name;\n      if (cName) {\n        this.searchCurName = cName;\n        this.searchIndex = searchIndex;\n        if (e.keyCode == 13) {\n          this.$router.push({\n            path: '/' + searchList[searchIndex].name\n          });\n          this.searchCurName = '';\n          this.searchIndex = 0;\n          this.searchVal = '';\n        }\n      }\n    }\n  };\n};\n</script>\n<style lang=\"scss\">\n.search-box {\n  position: relative;\n  min-width: 300px;\n  height: 22px;\n  line-height: 22px;\n  .search-input {\n    height: 22px;\n    padding-left: 42px;\n    font-size: 14px;\n    vertical-align: middle;\n    background-color: transparent;\n    background-image: url('../../assets/images/input-search.png');\n    background-repeat: no-repeat;\n    font-size: 14px;\n    color: #fff;\n    &:focus {\n      outline: none;\n    }\n  }\n}\n.search-list {\n  background: #fff;\n  position: absolute;\n  width: 300px;\n  list-style: none;\n  border: 1px solid #f2f2f2;\n  z-index: 99999;\n  top: 27px;\n  padding: 0;\n  li {\n    height: 40px;\n    line-height: 40px;\n    font-size: 12px;\n    a {\n      display: inline-block;\n      box-sizing: border-box;\n      width: 100%;\n      padding-left: 40px;\n      text-decoration: none;\n      color: #666;\n    }\n    &:hover {\n      // background: #6096ff;\n      color: #fa2c19;\n      a {\n        color: #fa2c19;\n      }\n    }\n  }\n  .cur {\n    background: #fa2c19;\n    color: #fff;\n    &:hover {\n      color: #fff;\n      font-weight: bold;\n      a {\n        color: #fff;\n      }\n    }\n    a {\n      color: #fff;\n    }\n  }\n}\n</style>\n"]}]}