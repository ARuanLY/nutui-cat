{"remainingRequest":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/packages/backtop/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/src/packages/backtop/index.vue","mtime":1626664435490},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ailu/Documents/program/nutui-lu/nutui-cat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICdAL3V0aWxzL2NyZWF0ZSc7CmNvbnN0IHsgY29tcG9uZW50TmFtZSwgY3JlYXRlIH0gPSBjcmVhdGVDb21wb25lbnQoJ2JhY2t0b3AnKTsKaW1wb3J0IHRocm90dGxlIGZyb20gJ2xvZGFzaC90aHJvdHRsZSc7CgpleHBvcnQgZGVmYXVsdCBjcmVhdGUoewogIHByb3BzOiB7CiAgICBlbElkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sIAogICAgZGlzdGFuY2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAyMDAKICAgIH0sIAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7IAogICAgICBzaG93QmFja1RvcDogZmFsc2UsCiAgICAgIF9wcmV2VG9wOiAwCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY29tcHV0ZWQ6ewogICAgY2xhc3NlcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBbY29tcG9uZW50TmFtZV06IHRydWUsCiAgICAgIH07CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLmVsSWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbElkKSkgewogICAgICB0aGlzLnNjcm9sbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbElkKTsKICAgIH0KICAgIGNvbnNvbGUubG9nKCd0aGlzLnNjcm9sbEVsJywgdGhpcy5zY3JvbGxFbCk7CiAgICBjb25zb2xlLmxvZygnd2luZG93Jywgd2luZG93KTsKCiAgICAvLyDmu5rliqjnm5HlkKwKICAgIHRoaXMuc2Nyb2xsRWwuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhyb3R0bGUodGhpcy5faGFuZGxlSW50ZXJhY3Rpb24sIDMwMCksIHRydWUpCiAgICB0aGlzLl9saXN0ZW5TY3JvbGwoKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xpY2soKXsKICAgICAgdGhpcy4kZW1pdCgnY2xpY2snKQogICAgfSwKICAgIC8vIOS4iua7kQogICAgX3Njcm9sbFVwKCkgewogICAgICAvLyBjb25zb2xlLmxvZygn5LiK5ruRJykKICAgICAgdGhpcy5zaG93QmFja1RvcCA9IHRydWU7CiAgICAgIHRoaXMuc2Nyb2xsVXAgJiYgdGhpcy5zY3JvbGxVcCgpCiAgICB9LAogICAgLy8g5LiL5ruRCiAgICBfc2Nyb2xsRG93bigpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ+S4i+a7kScpCiAgICAgIHRoaXMuc2hvd0JhY2tUb3AgPSBmYWxzZTsKICAgICAgdGhpcy5zY3JvbGxEb3duICYmIHRoaXMuc2Nyb2xsRG93bigpCiAgICB9LAogICAgLy8g5ruR5Yqo5YGc5q2iCiAgICBfc2Nyb2xsU3RvcCgpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ+a7keWKqOWBnOatoicpCiAgICAgIHRoaXMuc2hvd0JhY2tUb3AgPSB0cnVlOwogICAgICB0aGlzLnNjcm9sbFN0b3AgJiYgdGhpcy5zY3JvbGxTdG9wKCkKICAgIH0sCiAgICBfaGFuZGxlSW50ZXJhY3Rpb24oKSB7CiAgICAgIGxldCB0b3AgPSB0aGlzLnNjcm9sbEVsLnBhZ2VZT2Zmc2V0IHx8IHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wCiAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZScsIHRoaXMuZGlzdGFuY2UpCiAgICAgIC8vIGNvbnNvbGUubG9nKCd0b3AnLCB0b3ApCiAgICAgIGlmICh0b3AgPj0gdGhpcy5kaXN0YW5jZSkgewogICAgICAgIHRoaXMuc2hvd0Zsb2F0ID0gdHJ1ZTsKICAgICAgICBpZiAodGhpcy5fcHJldlRvcCAtIHRvcCA8IDAvKiAmJiB0aGlzLnNsaWRlTWVudSovKSB7CiAgICAgICAgICAvLyDkuIvmu5rliqgKICAgICAgICAgIHRoaXMuX3Njcm9sbERvd24oKQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5fcHJldlRvcCAtIHRvcCA+IDApIHsKICAgICAgICAgIC8vIOS4iua7muWKqAogICAgICAgICAgdGhpcy5fc2Nyb2xsVXAoKQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLl9wcmV2VG9wID0gdG9wCiAgICB9LAogICAgLy8g55uR5ZCsIOaJi+aMh+emu+W8gOWxj+W5lSDlkowg5oOv5oCn5YGc5q2i77yM5Lik6ICF5ZCM5pe25ruh6Laz5omN6K+05piO55So5oi35YGc5q2i5ruR5Yqo77yM5oyJ5L2P5Lmf566X5ruRCiAgICBfbGlzdGVuU2Nyb2xsKCkgewogICAgICB0aGlzLnNjcm9sbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5fc2Nyb2xsVG91Y2ggPSB0cnVlCiAgICAgIH0pCiAgICAgIHRoaXMuc2Nyb2xsRWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5fc2Nyb2xsVG91Y2ggPSBmYWxzZQogICAgICAgIHRoaXMuX3Njcm9sbFN0b3AoKQogICAgICB9KQogICAgICB0aGlzLnNjcm9sbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHsKICAgICAgICB0aGlzLl9zY3JvbGxpbmcgPSB0cnVlCiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3N0aW1lcikKICAgICAgICB0aGlzLl9zdGltZXIgPSBudWxsCiAgICAgICAgdGhpcy5fc3RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLl9zY3JvbGxpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5fc2Nyb2xsU3RvcCgpCiAgICAgICAgfSwgODAwKQogICAgICB9KQogICAgfQogIH0KfSk7Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/packages/backtop","sourcesContent":["<template>\n  <nut-backtop :class=\"classes\" @click=\"handleClick\" :el-id=\"elId\" v-show=\"showBackTop\">\n    <slot></slot>\n  </nut-backtop>\n</template>\n<script>\n\nimport { createComponent } from '@/utils/create';\nconst { componentName, create } = createComponent('backtop');\nimport throttle from 'lodash/throttle';\n\nexport default create({\n  props: {\n    elId: {\n      type: String,\n      default: ''\n    }, \n    distance: {\n      type: Number,\n      default: 200\n    }, \n  },\n  data() {\n    return { \n      showBackTop: false,\n      _prevTop: 0\n    };\n  },\n  components: {},\n  computed:{\n    classes() {\n      return {\n        [componentName]: true,\n      };\n    },\n  },\n  mounted() {\n    if (this.elId && document.getElementById(this.elId)) {\n      this.scrollEl = document.getElementById(this.elId);\n    }\n    console.log('this.scrollEl', this.scrollEl);\n    console.log('window', window);\n\n    // 滚动监听\n    this.scrollEl.addEventListener('scroll', throttle(this._handleInteraction, 300), true)\n    this._listenScroll()\n  },\n  methods: {\n    handleClick(){\n      this.$emit('click')\n    },\n    // 上滑\n    _scrollUp() {\n      // console.log('上滑')\n      this.showBackTop = true;\n      this.scrollUp && this.scrollUp()\n    },\n    // 下滑\n    _scrollDown() {\n      // console.log('下滑')\n      this.showBackTop = false;\n      this.scrollDown && this.scrollDown()\n    },\n    // 滑动停止\n    _scrollStop() {\n      // console.log('滑动停止')\n      this.showBackTop = true;\n      this.scrollStop && this.scrollStop()\n    },\n    _handleInteraction() {\n      let top = this.scrollEl.pageYOffset || this.scrollEl.scrollTop\n      // console.log('distance', this.distance)\n      // console.log('top', top)\n      if (top >= this.distance) {\n        this.showFloat = true;\n        if (this._prevTop - top < 0/* && this.slideMenu*/) {\n          // 下滚动\n          this._scrollDown()\n        } else if (this._prevTop - top > 0) {\n          // 上滚动\n          this._scrollUp()\n        }\n      }\n      this._prevTop = top\n    },\n    // 监听 手指离开屏幕 和 惯性停止，两者同时满足才说明用户停止滑动，按住也算滑\n    _listenScroll() {\n      this.scrollEl.addEventListener('touchstart', () => {\n        this._scrollTouch = true\n      })\n      this.scrollEl.addEventListener('touchend', () => {\n        this._scrollTouch = false\n        this._scrollStop()\n      })\n      this.scrollEl.addEventListener('scroll', () => {\n        this._scrolling = true\n        clearTimeout(this._stimer)\n        this._stimer = null\n        this._stimer = setTimeout(() => {\n          this._scrolling = false\n          this._scrollStop()\n        }, 800)\n      })\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@import 'index.scss';\n</style>\n  "]}]}